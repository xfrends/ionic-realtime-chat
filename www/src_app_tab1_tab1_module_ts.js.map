{"version":3,"file":"src_app_tab1_tab1_module_ts.js","mappings":"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","sources":["./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: 'messages',\n    loadChildren: () => import('../chat/messages/messages.module').then(m => m.MessagesPageModule)\n  },\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { Platform } from '@ionic/angular';\nimport { ContentService } from '../shared/api/content.service';\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page implements OnInit {\n\n  empty = true;\n  showButton = false;\n  newMessage = false;\n  chats = [];\n\n  constructor(\n    private platform: Platform,\n    private router: Router,\n    private contentService: ContentService\n  ) { }\n\n  ngOnInit() {\n    this.getChats();\n    if (!this.platform.is('ios')) {\n      this.showButton = true;\n    }\n  }\n\n  getChats() {\n    this.contentService.getToken().then((token) => {\n      this.contentService.getChats(token).subscribe(\n        (response) => {\n          this.chats = response.content;\n          if (this.chats.length !== 0) {\n            this.empty = !true;\n            const today = new Date();\n            this.chats.forEach(element => {\n              const last = new Date( element.updated_at);\n              if (today.toDateString() === last.toDateString()) {\n                element.today = true;\n              }\n            });\n          }\n        },\n        (error) => {\n          console.log('error: ', error);\n          if (error.status === 401) {\n            this.contentService.deleteToken();\n            this.router.navigate(['/login']);\n          }\n        }\n        );\n    });\n  }\n  onScroll(event) {\n    if (event.detail.deltaY > 0) {\n        this.showButton = true;\n    } else if (event.detail.deltaY < 0 && this.platform.is('ios')) {\n        this.showButton = false;\n    }\n  }\n  createChat() {\n    this.router.navigate(['tabs/contact']);\n  }\n  pinChat(chatId) {\n    this.contentService.getToken().then((token) => {\n      this.contentService.pinChat(token, chatId, true).subscribe(\n        (response) => {\n            this.getChats();\n        });\n    });\n  }\n  unPinChat(chatId) {\n    this.contentService.getToken().then((token) => {\n      this.contentService.pinChat(token, chatId, false).subscribe(\n        (response) => {\n            this.getChats();\n        });\n    });\n  }\n  openChat(chatId) {\n    const navigationExtras: NavigationExtras = {\n      queryParams: {\n        id: chatId\n      }\n    };\n    this.router.navigate(['tabs/chat/messages'], navigationExtras);\n  }\n  deleteChat(chatId) {\n    this.contentService.getToken().then((token) => {\n      this.contentService.deleteChat(token, chatId).subscribe(\n        (response) => {\n            this.getChats();\n        });\n    });\n  }\n  unread(chatId) {\n    console.log('unread chat', chatId);\n  }\n  doRefresh(event) {\n    this.getChats();\n    setTimeout(() => {\n      event.target.complete();\n    }, 2000);\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}